
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z43R9PWW0B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z43R9PWW0B');
    </script>
    
    <title>Matchmaking with Elote &#8212; elote 1.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=30d13653" />
    <link rel="stylesheet" type="text/css" href="../_static/css/wabi.css?v=501c8ac3" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=71d92741" />
    <script src="../_static/documentation_options.js?v=fc837d61"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Feature Prioritization with Elote" href="feature_prioritization.html" />
    <link rel="prev" title="Product Ranking with Elote" href="product_ranking.html" />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,600;0,9..144,700;1,9..144,400&family=Newsreader:ital,opsz,wght@0,6..72,400;0,6..72,500;1,6..72,400;1,6..72,500&family=Instrument+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400&display=swap" rel="stylesheet">



<meta name="description" content="Matchmaking with Elote - elote documentation">





<meta property="og:title" content="Matchmaking with Elote">
<meta property="og:description" content="Matchmaking with Elote - elote documentation">
<meta property="og:type" content="website">

<meta property="og:url" content="https://elote.mcginniscommawill.com/use_cases/matchmaking.html">


<meta property="og:site_name" content="elote">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Matchmaking with Elote">
<meta name="twitter:description" content="Matchmaking with Elote - elote documentation">

<meta name="twitter:site" content="@willmcginniser">





<link rel="canonical" href="https://elote.mcginniscommawill.com/use_cases/matchmaking.html">


 

  </head><body>
<header class="header">
  <div class="header__inner">
    
    <a href="https://mcginniscommawill.com" class="header__logo">
      McGinnis, Will
    </a>

    
    <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
      </svg>
    </button>

    
    <nav class="nav" role="navigation">
      
      
        
          
          
          
          <a href="https://mcginniscommawill.com/guides/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Guides
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/topics/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Topics
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/posts/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Blog
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/about/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            About
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/coffee/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Free Coffee
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/oss/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            OSS
          </a>
        
      

      
      
      <a href="../index.html" class="nav__link nav__link--active">
        Docs
      </a>
      
    </nav>
  </div>
</header>


<nav class="breadcrumbs" aria-label="Breadcrumb">
  <div class="breadcrumbs__inner">
    
    <a href="https://mcginniscommawill.com">Home</a>
    <span class="breadcrumbs__separator">/</span>
    
    <a href="../index.html">Docs</a>
    
    
    <span class="breadcrumbs__separator">/</span>
    <span>Matchmaking with Elote</span>
    
  </div>
</nav>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="matchmaking-with-elote">
<h1>Matchmaking with Elote<a class="headerlink" href="#matchmaking-with-elote" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Matchmaking is the process of pairing players or competitors in a way that creates fair, balanced, and enjoyable matches. It’s a critical component in competitive games, sports, and other contest formats. Poor matchmaking can lead to frustration, as matches that are too easy or too difficult are rarely satisfying for either participant.</p>
<p>Elote provides powerful tools for implementing sophisticated matchmaking systems through its rating implementations. This guide demonstrates how to use Elote for effective matchmaking in various scenarios.</p>
</section>
<section id="basic-matchmaking-principles">
<h2>Basic Matchmaking Principles<a class="headerlink" href="#basic-matchmaking-principles" title="Link to this heading">¶</a></h2>
<p>Effective matchmaking typically follows these principles:</p>
<ol class="arabic simple">
<li><p><strong>Skill-Based Pairing</strong>: Match players with similar skill levels</p></li>
<li><p><strong>Uncertainty Handling</strong>: Account for confidence in skill estimates</p></li>
<li><p><strong>Wait Time Balancing</strong>: Balance match quality with queue time</p></li>
<li><p><strong>Variety</strong>: Avoid repetitive matchups</p></li>
<li><p><strong>Team Balancing</strong>: For team games, ensure teams have similar overall skill</p></li>
</ol>
</section>
<section id="simple-skill-based-matchmaking">
<h2>Simple Skill-Based Matchmaking<a class="headerlink" href="#simple-skill-based-matchmaking" title="Link to this heading">¶</a></h2>
<p>Let’s start with a basic implementation using Elo ratings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">elote</span><span class="w"> </span><span class="kn">import</span> <span class="n">EloCompetitor</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MatchmakingSystem</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_player</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">initial_rating</span><span class="o">=</span><span class="mi">1500</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a new player in the matchmaking system&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;competitor&#39;</span><span class="p">:</span> <span class="n">EloCompetitor</span><span class="p">(</span><span class="n">initial_rating</span><span class="o">=</span><span class="n">initial_rating</span><span class="p">),</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">player_id</span><span class="p">,</span>
                <span class="s1">&#39;matches_played&#39;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">max_rating_diff</span><span class="o">=</span><span class="mi">200</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find a suitable opponent for a player&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span>

        <span class="n">player</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>
        <span class="n">player_rating</span> <span class="o">=</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span>

        <span class="c1"># Filter players within rating range</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">p</span> <span class="k">for</span> <span class="n">pid</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="o">!=</span> <span class="n">player_id</span> <span class="ow">and</span>
            <span class="nb">abs</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">player_rating</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_rating_diff</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># No suitable match found</span>

        <span class="c1"># Sort by rating difference (ascending)</span>
        <span class="n">candidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">player_rating</span><span class="p">))</span>

        <span class="c1"># Return the best match</span>
        <span class="k">return</span> <span class="n">candidates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record_match_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">winner_id</span><span class="p">,</span> <span class="n">loser_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record the result of a match&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">winner_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">winner_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loser_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">loser_id</span><span class="p">)</span>

        <span class="c1"># Update ratings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">winner_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">beat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">loser_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">])</span>

        <span class="c1"># Update match counts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">winner_id</span><span class="p">][</span><span class="s1">&#39;matches_played&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">loser_id</span><span class="p">][</span><span class="s1">&#39;matches_played&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get stats for a player&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">player</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">player_id</span><span class="p">,</span>
            <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span><span class="p">,</span>
            <span class="s1">&#39;matches_played&#39;</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;matches_played&#39;</span><span class="p">]</span>
        <span class="p">}</span>

<span class="c1"># Usage example</span>
<span class="n">matchmaker</span> <span class="o">=</span> <span class="n">MatchmakingSystem</span><span class="p">()</span>

<span class="c1"># Register some players</span>
<span class="n">matchmaker</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="s2">&quot;player1&quot;</span><span class="p">,</span> <span class="mi">1600</span><span class="p">)</span>
<span class="n">matchmaker</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="s2">&quot;player2&quot;</span><span class="p">,</span> <span class="mi">1550</span><span class="p">)</span>
<span class="n">matchmaker</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="s2">&quot;player3&quot;</span><span class="p">,</span> <span class="mi">1700</span><span class="p">)</span>
<span class="n">matchmaker</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="s2">&quot;player4&quot;</span><span class="p">,</span> <span class="mi">1400</span><span class="p">)</span>

<span class="c1"># Find a match for player1</span>
<span class="n">opponent_id</span> <span class="o">=</span> <span class="n">matchmaker</span><span class="o">.</span><span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;player1&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found match: player1 vs </span><span class="si">{</span><span class="n">opponent_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Record match result</span>
<span class="n">matchmaker</span><span class="o">.</span><span class="n">record_match_result</span><span class="p">(</span><span class="s2">&quot;player1&quot;</span><span class="p">,</span> <span class="n">opponent_id</span><span class="p">)</span>

<span class="c1"># Check updated ratings</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Player1 rating: </span><span class="si">{</span><span class="n">matchmaker</span><span class="o">.</span><span class="n">get_player_stats</span><span class="p">(</span><span class="s1">&#39;player1&#39;</span><span class="p">)[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opponent rating: </span><span class="si">{</span><span class="n">matchmaker</span><span class="o">.</span><span class="n">get_player_stats</span><span class="p">(</span><span class="n">opponent_id</span><span class="p">)[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-matchmaking-with-glicko">
<h2>Advanced Matchmaking with Glicko<a class="headerlink" href="#advanced-matchmaking-with-glicko" title="Link to this heading">¶</a></h2>
<p>Glicko is particularly well-suited for matchmaking because it tracks rating reliability through the rating deviation (RD) parameter. This allows us to account for uncertainty in player skill estimates:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">elote</span><span class="w"> </span><span class="kn">import</span> <span class="n">GlickoCompetitor</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GlickoMatchmaker</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_player</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">initial_rating</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span> <span class="n">initial_rd</span><span class="o">=</span><span class="mi">350</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a new player with Glicko rating&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;competitor&#39;</span><span class="p">:</span> <span class="n">GlickoCompetitor</span><span class="p">(</span><span class="n">initial_rating</span><span class="o">=</span><span class="n">initial_rating</span><span class="p">,</span> <span class="n">initial_rd</span><span class="o">=</span><span class="n">initial_rd</span><span class="p">),</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">player_id</span><span class="p">,</span>
                <span class="s1">&#39;matches_played&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;last_active&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">max_rating_diff</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">consider_rd</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find a match considering both rating and rating deviation&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span>

        <span class="n">player</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>
        <span class="n">player_rating</span> <span class="o">=</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span>
        <span class="n">player_rd</span> <span class="o">=</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rd</span>

        <span class="c1"># Update all players&#39; RD based on inactivity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_inactive_players</span><span class="p">()</span>

        <span class="n">candidates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pid</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="o">==</span> <span class="n">player_id</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Basic rating difference check</span>
            <span class="n">rating_diff</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">player_rating</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rating_diff</span> <span class="o">&gt;</span> <span class="n">max_rating_diff</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Calculate match quality score (lower is better)</span>
            <span class="k">if</span> <span class="n">consider_rd</span><span class="p">:</span>
                <span class="c1"># Consider both rating difference and uncertainty</span>
                <span class="c1"># Higher RD means we&#39;re less certain about the rating</span>
                <span class="n">combined_rd</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">player_rd</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rd</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">match_quality</span> <span class="o">=</span> <span class="n">rating_diff</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">combined_rd</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">match_quality</span> <span class="o">=</span> <span class="n">rating_diff</span>

            <span class="n">candidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pid</span><span class="p">,</span> <span class="n">match_quality</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Sort by match quality (ascending)</span>
        <span class="n">candidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># Return the best match</span>
        <span class="k">return</span> <span class="n">candidates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_inactive_players</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update RD for inactive players&quot;&quot;&quot;</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">player</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Calculate days since last activity</span>
            <span class="n">days_inactive</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_time</span> <span class="o">-</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;last_active&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">days_inactive</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Increase RD based on inactivity (simplified)</span>
                <span class="c1"># In a real system, you&#39;d use the proper Glicko formula</span>
                <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rd</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                    <span class="mi">350</span><span class="p">,</span>  <span class="c1"># Max RD</span>
                    <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rd</span> <span class="o">+</span> <span class="p">(</span><span class="n">days_inactive</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># Increase by 5 per day</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record_match_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">winner_id</span><span class="p">,</span> <span class="n">loser_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record match result and update ratings&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">winner_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">winner_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loser_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">loser_id</span><span class="p">)</span>

        <span class="c1"># Update ratings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">winner_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">beat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">loser_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">])</span>

        <span class="c1"># Update match counts and activity time</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="p">[</span><span class="n">winner_id</span><span class="p">,</span> <span class="n">loser_id</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;matches_played&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;last_active&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_time</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get detailed stats for a player&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">player</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">player_id</span><span class="p">,</span>
            <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span><span class="p">,</span>
            <span class="s1">&#39;rating_deviation&#39;</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rd</span><span class="p">,</span>
            <span class="s1">&#39;matches_played&#39;</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;matches_played&#39;</span><span class="p">],</span>
            <span class="s1">&#39;last_active&#39;</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;last_active&#39;</span><span class="p">]</span>
        <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="team-based-matchmaking">
<h2>Team-Based Matchmaking<a class="headerlink" href="#team-based-matchmaking" title="Link to this heading">¶</a></h2>
<p>For team games, we need to consider the overall team skill level. Here’s an approach using Elote:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">elote</span><span class="w"> </span><span class="kn">import</span> <span class="n">EloCompetitor</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">statistics</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TeamMatchmaker</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">players</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">teams</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_player</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">initial_rating</span><span class="o">=</span><span class="mi">1500</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register an individual player&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;competitor&#39;</span><span class="p">:</span> <span class="n">EloCompetitor</span><span class="p">(</span><span class="n">initial_rating</span><span class="o">=</span><span class="n">initial_rating</span><span class="p">),</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">player_id</span><span class="p">,</span>
                <span class="s1">&#39;matches_played&#39;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_team</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">team_id</span><span class="p">,</span> <span class="n">player_ids</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a team with its players&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">team_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">:</span>
            <span class="c1"># Ensure all players are registered</span>
            <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">player_ids</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span>

            <span class="c1"># Create team</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">team_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">team_id</span><span class="p">,</span>
                <span class="s1">&#39;player_ids&#39;</span><span class="p">:</span> <span class="n">player_ids</span><span class="p">,</span>
                <span class="s1">&#39;matches_played&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;competitor&#39;</span><span class="p">:</span> <span class="n">EloCompetitor</span><span class="p">(</span>
                    <span class="n">initial_rating</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_calculate_team_rating</span><span class="p">(</span><span class="n">player_ids</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">team_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_team_rating</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_ids</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate a team&#39;s rating based on player ratings&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">player_ids</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1500</span>

        <span class="n">ratings</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">pid</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">player_ids</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ratings</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_team_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">team_id</span><span class="p">,</span> <span class="n">max_rating_diff</span><span class="o">=</span><span class="mi">200</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find a suitable opponent team&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">team_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">team</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">team_id</span><span class="p">]</span>
        <span class="n">team_rating</span> <span class="o">=</span> <span class="n">team</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span>

        <span class="c1"># Filter teams within rating range</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">t</span> <span class="k">for</span> <span class="n">tid</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">tid</span> <span class="o">!=</span> <span class="n">team_id</span> <span class="ow">and</span>
            <span class="nb">abs</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">team_rating</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_rating_diff</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Sort by rating difference</span>
        <span class="n">candidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">team_rating</span><span class="p">))</span>

        <span class="c1"># Return the best match</span>
        <span class="k">return</span> <span class="n">candidates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record_team_match_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">winner_team_id</span><span class="p">,</span> <span class="n">loser_team_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Record the result of a team match&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">winner_team_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span> <span class="ow">or</span> <span class="n">loser_team_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Update team ratings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">winner_team_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">beat</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">loser_team_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Update match counts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">winner_team_id</span><span class="p">][</span><span class="s1">&#39;matches_played&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">loser_team_id</span><span class="p">][</span><span class="s1">&#39;matches_played&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Also update individual player ratings based on their contribution</span>
        <span class="c1"># This is a simplified approach - real systems would consider individual performance</span>
        <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">winner_team_id</span><span class="p">][</span><span class="s1">&#39;player_ids&#39;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">opponent_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">loser_team_id</span><span class="p">][</span><span class="s1">&#39;player_ids&#39;</span><span class="p">]:</span>
                <span class="c1"># Reduce the K-factor effect for team games</span>
                <span class="n">k_factor_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">k_factor</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">k_factor</span> <span class="o">=</span> <span class="n">k_factor_original</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">teams</span><span class="p">[</span><span class="n">winner_team_id</span><span class="p">][</span><span class="s1">&#39;player_ids&#39;</span><span class="p">])</span>

                <span class="c1"># Update rating</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">beat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">opponent_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">])</span>

                <span class="c1"># Restore K-factor</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">k_factor</span> <span class="o">=</span> <span class="n">k_factor_original</span>

        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="matchmaking-with-exploration">
<h2>Matchmaking with Exploration<a class="headerlink" href="#matchmaking-with-exploration" title="Link to this heading">¶</a></h2>
<p>To avoid always matching the same players and to better learn player skills, we can incorporate exploration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">find_match_with_exploration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">max_rating_diff</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">exploration_rate</span><span class="o">=</span><span class="mf">0.2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find a match with some randomness to explore player skills&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">player_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_player</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span>

    <span class="n">player</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span>
    <span class="n">player_rating</span> <span class="o">=</span> <span class="n">player</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span>

    <span class="c1"># Get all players within rating range</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">pid</span> <span class="k">for</span> <span class="n">pid</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pid</span> <span class="o">!=</span> <span class="n">player_id</span> <span class="ow">and</span>
        <span class="nb">abs</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">player_rating</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_rating_diff</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">candidates</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># With probability exploration_rate, pick a random candidate</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">exploration_rate</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span>

    <span class="c1"># Otherwise, pick the closest match by rating</span>
    <span class="n">candidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pid</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="n">pid</span><span class="p">][</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">player_rating</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">candidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="real-world-applications">
<h2>Real-World Applications<a class="headerlink" href="#real-world-applications" title="Link to this heading">¶</a></h2>
<p>Matchmaking systems using rating algorithms like those in Elote are used in:</p>
<ul class="simple">
<li><p><strong>Chess Platforms</strong>: Chess.com, Lichess.org</p></li>
<li><p><strong>Video Games</strong>: League of Legends, Dota 2, Overwatch</p></li>
<li><p><strong>Sports Leagues</strong>: For scheduling matches and tournaments</p></li>
<li><p><strong>Educational Platforms</strong>: For pairing students of similar abilities</p></li>
<li><p><strong>Competitive Programming</strong>: Sites like Codeforces, TopCoder</p></li>
</ul>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><strong>Start Conservative</strong>: Begin with wider rating ranges and narrow them as your player base grows</p></li>
<li><p><strong>Consider Wait Times</strong>: Balance match quality with queue time</p></li>
<li><p><strong>Use Glicko for Sparse Data</strong>: If players don’t compete frequently, Glicko handles uncertainty better</p></li>
<li><p><strong>Incorporate Feedback</strong>: Allow players to rate match quality</p></li>
<li><p><strong>Monitor Metrics</strong>: Track win rates, match abandonment, and player satisfaction</p></li>
<li><p><strong>Adjust Dynamically</strong>: Change parameters based on time of day, region, or queue length</p></li>
<li><p><strong>Handle New Players</strong>: Use placement matches or conservative initial ratings</p></li>
</ol>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>Elote provides the foundation for building sophisticated matchmaking systems through its implementation of various rating algorithms. By leveraging these tools and following the principles outlined in this guide, you can create matchmaking systems that provide fair, balanced, and enjoyable experiences for your users.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../competitors.html">Competitors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arenas.html">Arenas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serialization.html">Serialization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Rating Systems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/elo.html">Elo Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/glicko.html">Glicko Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/ecf.html">ECF Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/dwz.html">DWZ Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/ensemble.html">Ensemble Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/comparison.html">Comparing Rating Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advance_example.html">Advanced Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="product_ranking.html">Product Ranking with Elote</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Matchmaking with Elote</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_prioritization.html">Feature Prioritization with Elote</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/competitors.html">Competitors API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/arenas.html">Arenas API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../blog_posts.html">Blog Posts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to Elote</a></li>
</ul>

<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <div class="footer__inner">
    
    
    <div class="footer__links">
      
        <a href="https://github.com/wdm0006" class="footer__link" target="_blank" rel="noopener noreferrer">
          GitHub
        </a>
      
        <a href="https://www.linkedin.com/in/wmcginnis/" class="footer__link" target="_blank" rel="noopener noreferrer">
          LinkedIn
        </a>
      
        <a href="https://x.com/willmcginniser" class="footer__link" target="_blank" rel="noopener noreferrer">
          Twitter
        </a>
      
    </div>
    

    
    <p class="footer__copy">
      
        &copy; 2020, Will McGinnis
      
    </p>
  </div>
</footer>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('.nav');
    if (toggle && nav) {
      toggle.addEventListener('click', function() {
        nav.classList.toggle('is-open');
        const isOpen = nav.classList.contains('is-open');
        toggle.setAttribute('aria-expanded', isOpen);
      });
    }
  });
</script>

  </body>
</html>