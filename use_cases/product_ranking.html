
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z43R9PWW0B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z43R9PWW0B');
    </script>
    
    <title>Product Ranking with Elote &#8212; elote 1.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=30d13653" />
    <link rel="stylesheet" type="text/css" href="../_static/css/wabi.css?v=501c8ac3" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=71d92741" />
    <script src="../_static/documentation_options.js?v=fc837d61"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matchmaking with Elote" href="matchmaking.html" />
    <link rel="prev" title="Advanced Examples" href="../advance_example.html" />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,600;0,9..144,700;1,9..144,400&family=Newsreader:ital,opsz,wght@0,6..72,400;0,6..72,500;1,6..72,400;1,6..72,500&family=Instrument+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400&display=swap" rel="stylesheet">



<meta name="description" content="Product Ranking with Elote - elote documentation">





<meta property="og:title" content="Product Ranking with Elote">
<meta property="og:description" content="Product Ranking with Elote - elote documentation">
<meta property="og:type" content="website">

<meta property="og:url" content="https://elote.mcginniscommawill.com/use_cases/product_ranking.html">


<meta property="og:site_name" content="elote">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Product Ranking with Elote">
<meta name="twitter:description" content="Product Ranking with Elote - elote documentation">

<meta name="twitter:site" content="@willmcginniser">





<link rel="canonical" href="https://elote.mcginniscommawill.com/use_cases/product_ranking.html">


 

  </head><body>
<header class="header">
  <div class="header__inner">
    
    <a href="https://mcginniscommawill.com" class="header__logo">
      McGinnis, Will
    </a>

    
    <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
      </svg>
    </button>

    
    <nav class="nav" role="navigation">
      
      
        
          
          
          
          <a href="https://mcginniscommawill.com/guides/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Guides
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/topics/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Topics
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/posts/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Blog
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/about/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            About
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/coffee/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            Free Coffee
          </a>
        
          
          
          
          <a href="https://mcginniscommawill.com/oss/" class="nav__link"
             target="_blank" rel="noopener noreferrer">
            OSS
          </a>
        
      

      
      
      <a href="../index.html" class="nav__link nav__link--active">
        Docs
      </a>
      
    </nav>
  </div>
</header>


<nav class="breadcrumbs" aria-label="Breadcrumb">
  <div class="breadcrumbs__inner">
    
    <a href="https://mcginniscommawill.com">Home</a>
    <span class="breadcrumbs__separator">/</span>
    
    <a href="../index.html">Docs</a>
    
    
    <span class="breadcrumbs__separator">/</span>
    <span>Product Ranking with Elote</span>
    
  </div>
</nav>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="product-ranking-with-elote">
<h1>Product Ranking with Elote<a class="headerlink" href="#product-ranking-with-elote" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Product ranking is a common challenge in e-commerce, marketing, and user experience design. Traditional approaches often rely on explicit ratings (e.g., 1-5 stars) or engagement metrics (views, clicks), but these methods have limitations:</p>
<ul class="simple">
<li><p>Star ratings suffer from selection bias (mostly very satisfied or very dissatisfied users rate products)</p></li>
<li><p>Engagement metrics can be misleading (high views might indicate misleading thumbnails rather than quality)</p></li>
<li><p>Direct comparison data is often more reliable but harder to collect</p></li>
</ul>
<p>Elote provides an elegant solution by implementing rating systems that can rank products based on head-to-head comparisons. This approach is particularly valuable for:</p>
<ul class="simple">
<li><p>A/B testing product variants</p></li>
<li><p>Ranking items in a catalog based on user preferences</p></li>
<li><p>Prioritizing features or improvements</p></li>
<li><p>Building recommendation systems</p></li>
<li><p>Optimizing product assortments</p></li>
</ul>
<p>This guide demonstrates how to use Elote for product ranking through pairwise comparisons.</p>
</section>
<section id="basic-implementation">
<h2>Basic Implementation<a class="headerlink" href="#basic-implementation" title="Link to this heading">¶</a></h2>
<p>Let’s start with a simple example where we want to rank different product variants based on user preferences:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">elote</span><span class="w"> </span><span class="kn">import</span> <span class="n">LambdaArena</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="c1"># Sample data: tuples of (product_a, product_b, did_a_win)</span>
<span class="c1"># In a real application, this would come from user choices</span>
<span class="n">comparisons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;Product A&quot;</span><span class="p">,</span> <span class="s2">&quot;Product B&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>   <span class="c1"># User preferred A over B</span>
    <span class="p">(</span><span class="s2">&quot;Product A&quot;</span><span class="p">,</span> <span class="s2">&quot;Product C&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>  <span class="c1"># User preferred C over A</span>
    <span class="p">(</span><span class="s2">&quot;Product B&quot;</span><span class="p">,</span> <span class="s2">&quot;Product C&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>  <span class="c1"># User preferred C over B</span>
    <span class="p">(</span><span class="s2">&quot;Product A&quot;</span><span class="p">,</span> <span class="s2">&quot;Product D&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>   <span class="c1"># User preferred A over D</span>
    <span class="p">(</span><span class="s2">&quot;Product B&quot;</span><span class="p">,</span> <span class="s2">&quot;Product D&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>   <span class="c1"># User preferred B over D</span>
    <span class="p">(</span><span class="s2">&quot;Product C&quot;</span><span class="p">,</span> <span class="s2">&quot;Product D&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>   <span class="c1"># User preferred C over D</span>
<span class="p">]</span>

<span class="c1"># Define a function that returns True if the first product won</span>
<span class="k">def</span><span class="w"> </span><span class="nf">comparison_func</span><span class="p">(</span><span class="n">product_a</span><span class="p">,</span> <span class="n">product_b</span><span class="p">,</span> <span class="n">comparison_data</span><span class="o">=</span><span class="n">comparisons</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a_won</span> <span class="ow">in</span> <span class="n">comparison_data</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">product_a</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">==</span> <span class="n">product_b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a_won</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="n">product_b</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">==</span> <span class="n">product_a</span><span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">a_won</span>
    <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># No data for this comparison</span>

<span class="c1"># Create an arena with our comparison function</span>
<span class="n">arena</span> <span class="o">=</span> <span class="n">LambdaArena</span><span class="p">(</span><span class="n">comparison_func</span><span class="p">)</span>

<span class="c1"># Process all the comparisons</span>
<span class="k">for</span> <span class="n">product_a</span><span class="p">,</span> <span class="n">product_b</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">comparisons</span><span class="p">:</span>
    <span class="n">arena</span><span class="o">.</span><span class="n">tournament</span><span class="p">([(</span><span class="n">product_a</span><span class="p">,</span> <span class="n">product_b</span><span class="p">)])</span>

<span class="c1"># Get the rankings</span>
<span class="n">rankings</span> <span class="o">=</span> <span class="n">arena</span><span class="o">.</span><span class="n">leaderboard</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rankings</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>This would output a ranked list of products based on the pairwise comparisons.</p>
</section>
<section id="collecting-comparison-data">
<h2>Collecting Comparison Data<a class="headerlink" href="#collecting-comparison-data" title="Link to this heading">¶</a></h2>
<p>There are several ways to collect pairwise comparison data:</p>
<ol class="arabic simple">
<li><p><strong>Direct User Feedback</strong>: Present users with two options and ask which they prefer</p></li>
<li><p><strong>Implicit Behavior</strong>: Track which product users choose when presented with alternatives</p></li>
<li><p><strong>Purchase Data</strong>: Consider a purchase as a “win” against viewed-but-not-purchased alternatives</p></li>
<li><p><strong>Expert Evaluations</strong>: Have product experts or focus groups compare items</p></li>
</ol>
<p>Here’s an example of a simple web interface for collecting direct user feedback:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;product-comparison&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Which product do you prefer?<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;product-options&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;product&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;recordPreference(&#39;Product A&#39;)&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;product_a.jpg&quot;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&quot;Product A&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Product A<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Description of Product A<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;product&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;recordPreference(&#39;Product B&#39;)&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;product_b.jpg&quot;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&quot;Product B&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Product B<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Description of Product B<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">recordPreference</span><span class="p">(</span><span class="nx">preferredProduct</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">otherProduct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">preferredProduct</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;Product A&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;Product B&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Product A&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Send data to your backend</span>
<span class="w">  </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/record-preference&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">      </span><span class="nx">winner</span><span class="o">:</span><span class="w"> </span><span class="nx">preferredProduct</span><span class="p">,</span>
<span class="w">      </span><span class="nx">loser</span><span class="o">:</span><span class="w"> </span><span class="nx">otherProduct</span><span class="p">,</span>
<span class="w">      </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Load the next comparison</span>
<span class="w">  </span><span class="nx">loadNextComparison</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="advanced-implementation-e-commerce-product-ranking">
<h2>Advanced Implementation: E-commerce Product Ranking<a class="headerlink" href="#advanced-implementation-e-commerce-product-ranking" title="Link to this heading">¶</a></h2>
<p>For a more realistic e-commerce scenario, we might want to:</p>
<ol class="arabic simple">
<li><p>Use a more sophisticated rating system like Glicko</p></li>
<li><p>Persist ratings between sessions</p></li>
<li><p>Handle new products with appropriate initial ratings</p></li>
</ol>
<p>Here’s a more complete example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">elote</span><span class="w"> </span><span class="kn">import</span> <span class="n">GlickoCompetitor</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ProductRankingSystem</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratings_file</span><span class="o">=</span><span class="s1">&#39;product_ratings.pkl&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratings_file</span> <span class="o">=</span> <span class="n">ratings_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">products</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_ratings</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_ratings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratings_file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>  <span class="c1"># No existing ratings</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_ratings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ratings_file</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">products</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_or_create_product</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">initial_rating</span><span class="o">=</span><span class="mi">1500</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">product_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">products</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">products</span><span class="p">[</span><span class="n">product_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;competitor&#39;</span><span class="p">:</span> <span class="n">GlickoCompetitor</span><span class="p">(</span><span class="n">initial_rating</span><span class="o">=</span><span class="n">initial_rating</span><span class="p">),</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">product_id</span><span class="p">,</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">product_id</span><span class="p">,</span>
                <span class="s1">&#39;comparisons&#39;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">products</span><span class="p">[</span><span class="n">product_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">winner_id</span><span class="p">,</span> <span class="n">loser_id</span><span class="p">):</span>
        <span class="n">winner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_or_create_product</span><span class="p">(</span><span class="n">winner_id</span><span class="p">)</span>
        <span class="n">loser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_or_create_product</span><span class="p">(</span><span class="n">loser_id</span><span class="p">)</span>

        <span class="c1"># Update ratings</span>
        <span class="n">winner</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">beat</span><span class="p">(</span><span class="n">loser</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">])</span>

        <span class="c1"># Update comparison counts</span>
        <span class="n">winner</span><span class="p">[</span><span class="s1">&#39;comparisons&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">loser</span><span class="p">[</span><span class="s1">&#39;comparisons&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Save updated ratings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_ratings</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_rankings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_comparisons</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="c1"># Only rank products with sufficient data</span>
        <span class="n">ranked_products</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;comparisons&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">min_comparisons</span><span class="p">]</span>

        <span class="c1"># Sort by rating</span>
        <span class="n">ranked_products</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span><span class="p">,</span>
                <span class="s1">&#39;rd&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rd</span><span class="p">,</span>  <span class="c1"># Rating deviation (uncertainty)</span>
                <span class="s1">&#39;comparisons&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;comparisons&#39;</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ranked_products</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_win_probability</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_a_id</span><span class="p">,</span> <span class="n">product_b_id</span><span class="p">):</span>
        <span class="n">product_a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_or_create_product</span><span class="p">(</span><span class="n">product_a_id</span><span class="p">)</span>
        <span class="n">product_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_or_create_product</span><span class="p">(</span><span class="n">product_b_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">product_a</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">expected_score</span><span class="p">(</span><span class="n">product_b</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">])</span>

<span class="c1"># Usage example</span>
<span class="n">ranking_system</span> <span class="o">=</span> <span class="n">ProductRankingSystem</span><span class="p">()</span>

<span class="c1"># Record some comparisons</span>
<span class="n">ranking_system</span><span class="o">.</span><span class="n">record_comparison</span><span class="p">(</span><span class="s1">&#39;product-123&#39;</span><span class="p">,</span> <span class="s1">&#39;product-456&#39;</span><span class="p">)</span>
<span class="n">ranking_system</span><span class="o">.</span><span class="n">record_comparison</span><span class="p">(</span><span class="s1">&#39;product-789&#39;</span><span class="p">,</span> <span class="s1">&#39;product-123&#39;</span><span class="p">)</span>

<span class="c1"># Get current rankings</span>
<span class="n">rankings</span> <span class="o">=</span> <span class="n">ranking_system</span><span class="o">.</span><span class="n">get_rankings</span><span class="p">()</span>
<span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">product</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rankings</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rank</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (Rating: </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> ± </span><span class="si">{</span><span class="n">product</span><span class="p">[</span><span class="s1">&#39;rd&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="handling-cold-start">
<h2>Handling Cold Start<a class="headerlink" href="#handling-cold-start" title="Link to this heading">¶</a></h2>
<p>New products have no comparison data, creating a “cold start” problem. Here are strategies to address this:</p>
<ol class="arabic simple">
<li><p><strong>Conservative Initial Ratings</strong>: Start new products with average ratings but high uncertainty</p></li>
<li><p><strong>Exploration Phase</strong>: Deliberately include new products in comparisons more frequently</p></li>
<li><p><strong>Metadata-Based Initialization</strong>: Set initial ratings based on product attributes or similarity to existing products</p></li>
<li><p><strong>Expert Seeding</strong>: Have product experts provide initial comparisons before user data is available</p></li>
</ol>
<p>For example, to implement exploration-based comparisons:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">select_products_for_comparison</span><span class="p">(</span><span class="n">ranking_system</span><span class="p">,</span> <span class="n">exploration_rate</span><span class="o">=</span><span class="mf">0.3</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Select two products for comparison, balancing exploration and exploitation&quot;&quot;&quot;</span>
    <span class="n">products</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ranking_system</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="c1"># Separate products with few comparisons</span>
    <span class="n">new_products</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">products</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;comparisons&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">established_products</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">products</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;comparisons&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">established_products</span><span class="p">:</span>
        <span class="c1"># Not enough data yet, just pick randomly</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Decide whether to explore or exploit</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">exploration_rate</span> <span class="ow">and</span> <span class="n">new_products</span><span class="p">:</span>
        <span class="c1"># Exploration: pair a new product with an established one</span>
        <span class="n">product_a</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">new_products</span><span class="p">)</span>
        <span class="n">product_b</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">established_products</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Exploitation: pick products with similar ratings for informative comparison</span>
        <span class="n">product_a</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">established_products</span><span class="p">)</span>

        <span class="c1"># Find products with similar ratings</span>
        <span class="n">similar_products</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
            <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">established_products</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">product_a</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]],</span>
            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span> <span class="o">-</span> <span class="n">product_a</span><span class="p">[</span><span class="s1">&#39;competitor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rating</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Pick from the most similar ones</span>
        <span class="n">product_b</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">similar_products</span><span class="p">[:</span><span class="nb">max</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">similar_products</span><span class="p">))])</span>

    <span class="k">return</span> <span class="n">product_a</span><span class="p">,</span> <span class="n">product_b</span>
</pre></div>
</div>
</section>
<section id="real-world-applications">
<h2>Real-World Applications<a class="headerlink" href="#real-world-applications" title="Link to this heading">¶</a></h2>
<p>Companies using pairwise comparison approaches for product ranking include:</p>
<ul class="simple">
<li><p><strong>Netflix</strong>: Uses pairwise comparisons to optimize thumbnail images for movies and shows</p></li>
<li><p><strong>Booking.com</strong>: Ranks hotel listings based on implicit pairwise preferences from user behavior</p></li>
<li><p><strong>Spotify</strong>: Uses similar techniques for playlist recommendations</p></li>
<li><p><strong>Amazon</strong>: Employs pairwise comparisons for product search ranking optimization</p></li>
</ul>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>Elote provides a powerful framework for implementing product ranking systems based on pairwise comparisons. This approach offers several advantages over traditional rating methods:</p>
<ul class="simple">
<li><p>More reliable data from direct comparisons</p></li>
<li><p>Better handling of subjective preferences</p></li>
<li><p>Reduced bias compared to explicit ratings</p></li>
<li><p>Natural handling of new products through rating systems with uncertainty</p></li>
</ul>
<p>By leveraging Elote’s implementation of sophisticated rating systems, you can build robust product ranking solutions that more accurately reflect user preferences and improve the overall user experience.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../competitors.html">Competitors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arenas.html">Arenas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serialization.html">Serialization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Rating Systems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/elo.html">Elo Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/glicko.html">Glicko Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/ecf.html">ECF Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/dwz.html">DWZ Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/ensemble.html">Ensemble Rating System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rating_systems/comparison.html">Comparing Rating Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advance_example.html">Advanced Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Product Ranking with Elote</a></li>
<li class="toctree-l1"><a class="reference internal" href="matchmaking.html">Matchmaking with Elote</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_prioritization.html">Feature Prioritization with Elote</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/competitors.html">Competitors API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/arenas.html">Arenas API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../blog_posts.html">Blog Posts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to Elote</a></li>
</ul>

<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <div class="footer__inner">
    
    
    <div class="footer__links">
      
        <a href="https://github.com/wdm0006" class="footer__link" target="_blank" rel="noopener noreferrer">
          GitHub
        </a>
      
        <a href="https://www.linkedin.com/in/wmcginnis/" class="footer__link" target="_blank" rel="noopener noreferrer">
          LinkedIn
        </a>
      
        <a href="https://x.com/willmcginniser" class="footer__link" target="_blank" rel="noopener noreferrer">
          Twitter
        </a>
      
    </div>
    

    
    <p class="footer__copy">
      
        &copy; 2020, Will McGinnis
      
    </p>
  </div>
</footer>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('.nav');
    if (toggle && nav) {
      toggle.addEventListener('click', function() {
        nav.classList.toggle('is-open');
        const isOpen = nav.classList.contains('is-open');
        toggle.setAttribute('aria-expanded', isOpen);
      });
    }
  });
</script>

  </body>
</html>